<h2>
  <span>Portfolio: <input type="text" ng-model="portfolio.name" ng-change="updateName()" ></span>
  <span class="pull-right">
    <a class="btn btn-xs btn-primary" href="#/assetAdd?pid={{portfolio.id}}">
      Add asset
    </a>
    <button class="btn btn-xs btn-danger" ng-click="delPortfolio()">
     Delete portfolio 
    </button>
  </span>
</h2>

<div ng-show="!alist.length" class="alert alert-warning">
  No assets
</div>

<div ng-show="alist.length">
  <div>Portfolio VaR 95%: {{100*portfolioVaR(95)|number:2}} %</div>

  <br>

  <table class="table">
    <tr>
      <th>&nbsp;</th>
      <th>Symbol</th>
      <th>Name</th>
      <th>Exchange</th>
      <th>&nbsp;</th>
      <th>VaR (95%)</th>
      <th>Weight</th>
      <th>&nbsp;</th>
    </tr>
    <tr ng-repeat="a in alist track by a.src+a.lookup.Symbol">
      <td><input type="checkbox" ng-model="a.selected" /></td>
      <td>{{a.lookup.Symbol}}</td>
      <td>{{a.lookup.Name}}</td>
      <td>{{a.lookup.Exchange}}</td>
      <td>
        <div jq-sparkline ng-model="a.pnlsEdf" type="bar" ng-if="a.pnlsEdf"></div>
      </td>
      <td nowrap>
        {{100*calculateVaR(a,95)|number:2}} %
      </td>
      <td nowrap>
        <input type="number" min=0 max=100 step=0.1 ng-value="a.pct?a.pct:0" style="width:5em" ng-model="a.pct" ng-change="assetPct(a)">
        <div ng-show="a.src=='mf'" class="text-info">MF: {{a.pct}}</div>
      </td>
      <td nowrap>
        <a class="btn btn-xs btn-info" ng-href="#/assetShow/{{a.src}}/{{a.lookup.Symbol}}?pid={{portfolio.id}}" title="Show details">
          <span class="glyphicon glyphicon-search"></span>
        </a>
        &nbsp;
        <button class="btn btn-danger btn-xs" ng-click="delAsset(a)" title="Delete asset from portfolio">
          <span class="glyphicon glyphicon-remove"></span>
        </button>
      </td>
    </tr>
  </table>

</div>
